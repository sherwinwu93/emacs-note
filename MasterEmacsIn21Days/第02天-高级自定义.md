# 第二天:高级自定义
(setq cursor-type 'bar): 设置缓冲区局部变量,没有改变全局变量所以不起作用

(setq-default cursor-type 'bar): 设置缓冲区全局变量

(electric-indent-mode): 去除,不好用

(setq make-backup-files nil): 关闭自动生成备份文件

## 实践
1. 设置光标为bar
2. 去除缩进
3. 关闭自动备份文件

分屏的使用

1. C-x 1:

2. C-x 2: 将当前窗口分到上边

3. C-x 3: 将当前窗口分到右边

下面的配置在图像界面更快打开最近编辑过的文件

```
(require 'recentf);; 从文件中加载特性
(recentf-mode 1) 
(setq recentf-max-menu-item 10)
```

(delete-selection-mode 1): 选中文本后输入,用新输入代替旧的

## 实践
1. 分屏使用 1
2. 更快地打开最近编辑过的文件,M-x-file试试 1
3. 选中删除 C-S-<Spc> 1

;; 这个快捷键绑定可以用之后的插件 counsel 代替
;; (global-set-key (kbd "C-x C-r") 'recentf-open-files)

C-h C-f: find-function

C-h C-v: find-variable

C-h C-k: find-function-on-key
## 实践
function variable function-on-key 1

### Emacs也很美
#### 配置插件源
M-x package-list-packages: 查看所有的插件

更换使用新的软件源
```
 (when (>= emacs-major-version 24)
     (require 'package)
     (package-initialize)
     (setq package-archives '(("gnu"   . "http://elpa.emacs-china.org/gnu/")
		      ("melpa" . "http://elpa.emacs-china.org/melpa/"))))

;; 注意 elpa.emacs-china.org 是 Emacs China 中文社区在国内搭建的一个 ELPA 镜像

 ;; cl - Common Lisp Extension
 (require 'cl)

 ;; Add Packages
 (defvar my/packages '(
		;; --- Auto-completion ---
		company
		;; --- Better Editor ---
		hungry-delete
		swiper
		counsel
		smartparens
		;; --- Major Mode ---
		js2-mode
		;; --- Minor Mode ---
		nodejs-repl
		exec-path-from-shell
		;; --- Themes ---
		monokai-theme
		;; solarized-theme
		) "Default packages")

 (setq package-selected-packages my/packages)

 (defun my/packages-installed-p ()
      ;;来自cl的扩展
     (loop for pkg in my/packages
	   when (not (package-installed-p pkg)) do (return nil)
	   finally (return t)))

 (unless (my/packages-installed-p)
     (message "%s" "Refreshing package database...")
     (package-refresh-contents)
     (dolist (pkg my/packages)
       (when (not (package-installed-p pkg))
	 (package-install pkg))))

 ;; Find Executable Path on OS X
 (when (memq window-system '(mac ns))
   (exec-path-from-shell-initialize))
```

cl的使用示例
````
;;遍历所有buffer
(cl-loop for buf in (buffer-list)
    collect (buffer-file-name buf))

(cl-loop for x from 1 to 100
    for y = (* x x)
    until (>= y 729)
    finally return (list x (= y 729)))
;;quote
(print '(+ 1 1)) ;;->(+ 1 1)
(print (+ 1 1)) ;;->2

````

##### 实践
1. 配置镜像源 1
2. 查看所有插件 1

(setq initial-frame-alist(quote ((fullscreen . maximized))))  :emacs设置为默认全屏

(add-hook 'emacs-lisp-mode-hook 'show-paren-mode): 自动括号匹配

(global-h1-line-mode 1): 高亮光标,注意1还是l

##### 实践
1. 设置全屏 (没效) 1
2. 自动括号匹配 1
3. 高亮光标 1

### 安装主题
使用(add-to-list 'my/packages 'monokai-theme)-安装主题.
再使用(load-theme 'monokai 1)->每次打开时加载主题

#### 实践
1. 安装monokai-theme主题 1

#### 推荐插件
1. company
2. hungry-delete
3. Smex 
4. Swpier & Counsel
5. smartparens
使用M-x customize-group 选择插件后可以自定义插件设置,使用Save for future session保存到配置文件
(init.el)

### JavaScript IDE
将默认的JavaScript Major Mode 切换成 js2-mode.
先在melpa下载,再使用下面代码启用
(setq auto-mode-list
        (append '(("\\.js\\'"" . js2-mode))
                auto-mode-alist))
再切换到这个Major Mode

auto-mode-list的作用,使用正则匹配不停类型文件的MajorMoe
````
(("\\`/tmp/fol/" . text-mode)
 ("\\.texinfo\\'" . texinfo-mode)
 ("\\.texi\\'" . texinfo-mode)
 ("\\.el\\'" . emacs-lisp-mode)
 ("\\.c\\'" . c-mode)
 ("\\.h\\'" . c-mode)
 …)
````

```` 
(setq auto-mode-alist
  (append
   ;; File name (within directory) starts with a dot.
   '(("/\\.[^/]*\\'" . fundamental-mode)
     ;; File name has no dot.
     ("/[^\\./]*\\'" . fundamental-mode)
     ;; File name ends in ‘.C’.
     ("\\.C\\'" . c++-mode))
   auto-mode-alist))
````
 
 js2-mode模式:
 1. 语法高亮
 2. 语法检查器 Linter
 使用nodejs-repl插件,可以开始测试和开发JavaScript代码了
#### 实践
 1. 先在melpa下载js2-mode, 再设置.js后缀
 2. 使用js2-mode 开发个test.html至桌面
 
### Org-mode进阶
C-c '直接打开新的buffer用相应的MajorMode来编辑代码块的内容.

编辑完后使用<s Tab,直接插入代码块的代码片段.
```` 
'#+BEGIN_SRC emacs-lisp
    ;; Your Code goes here
'#+END_SRC
````
#### 实践
1. todo.org 1
2. 写emacs-lisp代码, java 1
3. <s Tab插入代码块 1

#### 添加Org-mode文本内语法高亮
(require 'org)
(setq org-src-fontify-natively t)

M-<RET>: 重置序号

##### ex
1. 设置语法高亮 1
2. 故意打乱序号后,重置 1

#### Agenda的使用
;;设置默认Org Agenda文件目录
(setq org-agenda-files '("~/org"))

;;设置org-agenda打开快捷键
(global-set-key (kbd "C-c a") 'org-agenda)

将*.org文件放入到文件夹就开始Agenda模式

1. C-c C-s: 选择想要开始的时间
2. C-c C-d: 选择想要结束的时间
3. C-c a: 可以打开Agenda模式菜单并选择不同的可视方法

##### 实践
1. 设置agenda目录为desktop/org/agenda 1
2. 设置org-agenda的快捷键 1
3. 设置开始时间,结束时间,选择不同的可视方法 0

